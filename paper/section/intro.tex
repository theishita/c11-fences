\snj{Could be useful.}
\cite{meshman2014synthesis} show that 'minimum fence insertion problem with multiple types of fence instructions is NP-hard even for straight-line programs' (modeled as the minimum multi-cut problem).